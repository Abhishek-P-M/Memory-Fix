<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Random Number Generator</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; margin: 20px; }
    select, input, button { margin: 5px; padding: 5px; font-size: 16px; }
    ul { list-style: none; padding: 0; }
    li { background: #f0f0f0; margin: 5px auto; padding: 10px; width: 120px; border-radius: 5px; font-size: 20px; }
  </style>
</head>
<body>
  <h2>Random Number Generator</h2>

  <label>Choose digits:</label>
  <select id="digitSelect">
    <option value="2">2-digit</option>
    <option value="3">3-digit</option>
    <option value="3prefix">3-digit with custom prefix</option>
  </select>

  <label id="prefixLabel" style="display:none;">Prefix:</label>
  <input type="number" id="prefixInput" min="0" max="9" value="0" style="display:none;">

  <label>Lock Time (ms):</label>
  <input type="number" id="lockTime" value="1000" min="100">

  <br><br>
  <button onclick="nextNumber()">Next</button>
  <button onclick="resetList()">Reset</button>

  <h3>Generated Numbers:</h3>
  <ul id="numberList"></ul>

  <script>
    let lastGenerated = null;
    let lastGeneratedTime = 0;
    let generatedNumbers = [];

    document.getElementById("digitSelect").addEventListener("change", function() {
      const prefixLabel = document.getElementById("prefixLabel");
      const prefixInput = document.getElementById("prefixInput");
      if (this.value === "3prefix") {
        prefixLabel.style.display = "inline";
        prefixInput.style.display = "inline";
      } else {
        prefixLabel.style.display = "none";
        prefixInput.style.display = "none";
      }
    });

    function generateNumber() {
      const digitChoice = document.getElementById("digitSelect").value;

      if (digitChoice === "2") {
        return String(Math.floor(Math.random() * 100)).padStart(2, '0'); // 00–99
      } 
      else if (digitChoice === "3") {
        return String(Math.floor(Math.random() * 1000)).padStart(3, '0'); // 000–999
      }
      else if (digitChoice === "3prefix") {
        const prefix = document.getElementById("prefixInput").value;
        const suffix = String(Math.floor(Math.random() * 100)).padStart(2, '0'); // 00–99
        return prefix + suffix; // e.g. 705
      }
    }

    function nextNumber() {
      const now = Date.now();
      const lockTime = parseInt(document.getElementById("lockTime").value);

      let newNumber = generateNumber();

      if (lastGenerated !== null && now - lastGeneratedTime < lockTime) {
        while (newNumber === lastGenerated) {
          newNumber = generateNumber();
        }
      }

      lastGenerated = newNumber;
      lastGeneratedTime = now;
      generatedNumbers.push(newNumber);

      updateList();
    }

    function updateList() {
      const list = document.getElementById("numberList");
      list.innerHTML = "";
      generatedNumbers.forEach(num => {
        const li = document.createElement("li");
        li.textContent = num;
        list.appendChild(li);
      });
    }

    function resetList() {
      generatedNumbers = [];
      lastGenerated = null;
      lastGeneratedTime = 0;
      updateList();
    }
  </script>
</body>
</html>
