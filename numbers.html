<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Memory Fix | Numbers</title>
<style>
body {
    font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    text-align: center;
    margin:0;
    padding:20px;
    background: linear-gradient(135deg, #f0f9ff, #cbebff);
    color: #333;
}
h2 { color:#2c3e50; font-size:32px; margin-bottom:20px; }
label { font-weight:bold; margin:8px; }
select,input { padding:8px 12px; font-size:16px; border-radius:8px; border:2px solid #ccc; outline:none; transition:0.2s; }
select:focus,input:focus { border-color:#3498db; box-shadow:0 0 6px rgba(52,152,219,0.4); }
button { padding:12px 24px; margin:10px; font-size:18px; font-weight:bold; border:none; border-radius:12px; cursor:pointer; }
button:hover { opacity:0.9; }
button.start { background:#27ae60; color:white; }
button.reset { background:#e74c3c; color:white; }

#currentNumber { font-size:48px; margin:25px auto 15px auto; width:180px; padding:20px; background:#27ae60; color:white; border-radius:15px; font-weight:bold; box-shadow:0px 4px 10px rgba(0,0,0,0.2); }
#countdownContainer { width:180px; height:12px; background:#eee; margin:10px auto 25px auto; border-radius:6px; overflow:hidden; box-shadow:inset 0px 2px 5px rgba(0,0,0,0.1); }
#countdownBar { height:100%; width:0%; background: linear-gradient(90deg, #2ecc71, #27ae60); transition: width 0.1s linear; }

#placeholders { display:flex; flex-wrap:wrap; justify-content:center; gap:10px; margin-top:20px; }
.placeholder { width:50px; height:50px; border:2px solid #3498db; border-radius:6px; display:flex; align-items:center; justify-content:center; font-size:22px; font-weight:bold; cursor:pointer; background:#fff; }
.digit { width:50px; height:50px; border-radius:6px; background:#3498db; color:white; display:inline-flex; align-items:center; justify-content:center; font-size:22px; font-weight:bold; margin:5px; cursor:pointer; }

#results { margin-top:30px; font-size:20px; }
</style>
</head>
<body>

<h2>Numbers Memorization</h2>

<label>Choose memorization method:</label>
<select id="methodSelect">
    <option value="count">Number of numbers</option>
    <option value="timer">Custom timer</option>
</select>

<div id="countOption">
    <label>Amount of numbers:</label>
    <input type="number" id="numCount" value="10" min="1" max="100">
</div>

<div id="timerOption" style="display:none;">
    <label>Time for memorization (minutes):</label>
    <input type="number" id="memMinutes" value="1" min="1" max="60">
</div>

<br>
<button class="start" onclick="startMemorization()">Start</button>
<button class="reset" onclick="resetAll()">Reset</button>

<div id="memorization" style="display:none;">
    <h3>Memorization</h3>
    <div id="currentNumber">--</div>
    <div id="countdownContainer"><div id="countdownBar"></div></div>
    <p id="numbersLeft"></p>
    <button onclick="nextNumber()">Next</button>
    <button onclick="finishMemorization()">Finish</button>
</div>

<div id="reproduction" style="display:none;">
    <h3>Reproduction Phase</h3>
    <p>Time: <span id="reproTime">0</span> s</p>
    <div id="placeholders"></div>
    <div id="digitButtons"></div>
    <button onclick="submitReproduction()">Submit</button>
</div>

<div id="results" style="display:none;">
    <h3>Results</h3>
    <p id="score"></p>
    <p id="totalTime"></p>
</div>

<script>
let numbers=[],userInput=[],currentIndex=0,lockInterval=null,totalTime=0;
let memorizeTimer=null,seconds=0,reproSeconds=0,reproTimer=null;
let activePlaceholder=null;

// Toggle input options
document.getElementById('methodSelect').addEventListener('change', function(){
    if(this.value==='count'){
        document.getElementById('countOption').style.display='inline';
        document.getElementById('timerOption').style.display='none';
    } else {
        document.getElementById('countOption').style.display='none';
        document.getElementById('timerOption').style.display='inline';
    }
});

function startMemorization(){
    numbers=[];
    currentIndex=0;
    seconds=0;
    document.getElementById('memorization').style.display='block';
    document.getElementById('reproduction').style.display='none';
    document.getElementById('results').style.display='none';
    userInput=[];
    
    const method=document.getElementById('methodSelect').value;
    if(method==='count'){
        const count=parseInt(document.getElementById('numCount').value);
        for(let i=0;i<count;i++) numbers.push(Math.floor(Math.random()*100));
        totalTime=0;
    } else {
        const mins=parseInt(document.getElementById('memMinutes').value);
        const totalSeconds=mins*60;
        totalTime=totalSeconds;
        // Generate numbers as user goes
    }
    document.getElementById('numbersLeft').innerText='Numbers left: '+(numbers.length-currentIndex);
    displayCurrentNumber();

    if(method==='timer'){
        memorizeTimer=setInterval(()=>{
            seconds++;
            if(seconds>=totalTime){
                clearInterval(memorizeTimer);
                finishMemorization();
            }
        },1000);
    }
}

function displayCurrentNumber(){
    const numDiv=document.getElementById('currentNumber');
    if(numbers[currentIndex]!==undefined) numDiv.textContent=numbers[currentIndex];
    document.getElementById('numbersLeft').innerText='Numbers left: '+(numbers.length-currentIndex);
}

function nextNumber(){
    currentIndex++;
    if(currentIndex>=numbers.length){
        finishMemorization();
    } else displayCurrentNumber();
}

function finishMemorization(){
    clearInterval(memorizeTimer);
    document.getElementById('memorization').style.display='none';
    startReproduction();
}

function startReproduction(){
    document.getElementById('reproduction').style.display='block';
    const placeholdersDiv=document.getElementById('placeholders');
    const digitsDiv=document.getElementById('digitButtons');
    placeholdersDiv.innerHTML=''; digitsDiv.innerHTML='';
    userInput=Array(numbers.length).fill('');

    // Reproduction timer
    reproSeconds=0;
    document.getElementById('reproTime').textContent='0';
    clearInterval(reproTimer);
    reproTimer=setInterval(()=>{ reproSeconds++; document.getElementById('reproTime').textContent=reproSeconds; },1000);

    // placeholders
    numbers.forEach((_,i)=>{
        const ph=document.createElement('div');
        ph.className='placeholder';
        ph.dataset.index=i;
        ph.textContent='';
        ph.onclick=()=>{ activePlaceholder=i; };
        placeholdersDiv.appendChild(ph);
    });

    // digit buttons
    for(let d=0; d<=9; d++){
        const btn=document.createElement('div');
        btn.className='digit';
        btn.textContent=d;
        btn.onclick=()=>{
            if(activePlaceholder!=null){
                userInput[activePlaceholder]=d;
                document.querySelectorAll('.placeholder')[activePlaceholder].textContent=d;
            }
        };
        digitsDiv.appendChild(btn);
    }
}

function submitReproduction(){
    clearInterval(reproTimer);
    totalTime += reproSeconds;
    let correct=0;
    for(let i=0;i<numbers.length;i++) if(userInput[i]==numbers[i]) correct++;
    document.getElementById('score').textContent=`Correct: ${correct}/${numbers.length}`;
    document.getElementById('totalTime').textContent=`Total Time Taken: ${totalTime} seconds (Memorization + Reproduction)`;
    document.getElementById('reproduction').style.display='none';
    document.getElementById('results').style.display='block';
}

function resetAll(){
    numbers=[]; userInput=[]; currentIndex=0; totalTime=0;
    clearInterval(memorizeTimer); clearInterval(reproTimer);
    document.getElementById('memorization').style.display='none';
    document.getElementById('reproduction').style.display='none';
    document.getElementById('results').style.display='none';
}
</script>

</body>
</html>
